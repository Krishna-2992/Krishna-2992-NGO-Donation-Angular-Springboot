<div class="registrationPage">
  <h1>Registration Page</h1>
  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
  </div>
  <form
    #registrationForm="ngForm"
    (ngSubmit)="handleRegistration(registrationForm)"
    class="form"
  >
    <div>
      <label for="name">Name:</label>
      <input
        type="text"
        id="name"
        name="name"
        [(ngModel)]="user.name"
        #name="ngModel"
        required
        maxlength="100"
      />
      <div
        *ngIf="name.invalid && (name.dirty || name.touched || submitted)"
        class="error-message"
      >
        <div *ngIf="name.errors?.['required']">Name is required.</div>
      </div>
    </div>
    <div>
      <label for="phone">Phone:</label>
      <input
        type="text"
        id="phone"
        name="phone"
        [(ngModel)]="user.phone"
        #phone="ngModel"
        required
        pattern="^\d{10}$"
        maxlength="10"
      />
      <div
        *ngIf="phone.invalid && (phone.dirty || phone.touched || submitted)"
        class="error-message"
      >
        <div *ngIf="phone.errors?.['required']">Phone is required.</div>
        <div *ngIf="phone.errors?.['pattern']">
          Phone must be exact 10 digits long
        </div>
      </div>
    </div>
    <div>
      <label for="email">Email:</label>
      <input
        type="email"
        id="email"
        name="email"
        [(ngModel)]="user.email"
        #email="ngModel"
        pattern="^[A-Za-z0-9+_.-]+@(.+)$"
      />
      <div
        *ngIf="email.invalid && (email.dirty || email.touched || submitted)"
        class="error-message"
      >
        <div *ngIf="email.errors?.['pattern']">
          Email must be exact 10 digits long
        </div>
      </div>
    </div>
    <div>
      <label for="address">Address:</label>
      <input
        type="text"
        id="address"
        name="address"
        [(ngModel)]="user.address"
        #address="ngModel"
        max="255"
      />
    </div>
    <div>
      <label for="username">Username:</label>
      <input
        type="text"
        id="username"
        name="username"
        [(ngModel)]="user.loginName"
        #username="ngModel"
        required
        minlength="4"
      />
      <div
        *ngIf="
          username.invalid && (username.dirty || username.touched || submitted)
        "
        class="error-message"
      >
        <div *ngIf="username.errors?.['required']">Username is required.</div>
        <div *ngIf="username.errors?.['minlength']">
          Username must be at least 4 characters long.
        </div>
      </div>
    </div>
    <div>
      <label for="password">Password:</label>
      <input
        type="password"
        id="password"
        name="password"
        [(ngModel)]="user.password"
        #password="ngModel"
        required
        minlength="8"
        pattern="^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$"
      />
      <div
        *ngIf="
          password.invalid && (password.dirty || password.touched || submitted)
        "
        class="error-message"
      >
        <div *ngIf="password.errors?.['required']">Password is required.</div>
        <div *ngIf="password.errors?.['minlength']">
          Password must be at least 8 characters long.
        </div>
        <div *ngIf="password.errors?.['pattern']">
          Password must contain at least one letter and one number.
        </div>
      </div>
    </div>
    <div>
      <label for="panNumber">PAN Number:</label>
      <input
        type="text"
        id="panNumber"
        name="panNumber"
        [(ngModel)]="user.panNumber"
        #panNumber="ngModel"
        pattern="^[A-Z]{5}\d{4}[A-Z]{1}$"
        required
      />
      <div
        *ngIf="
          panNumber.invalid &&
          (panNumber.dirty || panNumber.touched || submitted)
        "
        class="error-message"
      >
        <div *ngIf="panNumber.errors?.['required']">PAN is required.</div>
        <div *ngIf="panNumber.errors?.['pattern']">
          PAN must be of pattern ABCDE1234F.
        </div>
      </div>
    </div>
    <div>
      <button type="submit">Register</button>
    </div>
    <a routerLink="/login" routerLinkActive="active">
      <div class="link">Already have an account? Login</div>
    </a>
  </form>
</div>
